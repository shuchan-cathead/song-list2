<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ¶ æ­Œã®ãƒªã‚¹ãƒˆ</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-size: cover; background-repeat: no-repeat; background-position: center; transition: background-image 0.3s ease, background-color 0.3s ease; color: #000; min-height: 100vh; }
    h1 { margin-bottom: 10px; }
    .settings-toggle { position: fixed; bottom: 10px; right: 10px; z-index: 1000; }
    .settings-panel { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.9); border-top:1px solid #ccc; padding:10px; display:none; z-index:999; font-size:14px; }
    .settings-panel input[type="text"], .settings-panel input[type="range"], .settings-panel input[type="color"], .settings-panel input[type="file"] { margin:3px; }
    button { padding:5px 10px; margin:2px; font-size:14px; }
    table { width:100%; border-collapse: collapse; margin-top:10px; background: rgba(255,255,255,0.95); }
    th, td { border:1px solid #ccc; padding:8px; text-align:left; }
    th { background-color:#f0f0f0; cursor:pointer; }
    .pagination { margin-top:10px; text-align:center; }
    .pagination button { margin:0 5px; }
    @media(max-width:600px) { body, .settings-panel { font-size:12px; } table,th,td { font-size:12px; } button,input { font-size:11px; } }
  </style>
</head>
<body>
  <h1 id="pageTitle">ğŸ¶ æ­Œã®ãƒªã‚¹ãƒˆ</h1>
  <div>
    <input type="text" id="newTitle" placeholder="æ›²å">
    <input type="text" id="newArtist" placeholder="ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå">
    <button onclick="addSong()">è¿½åŠ </button>
  </div>
  <table id="songTable">
    <thead><tr>
      <th onclick="sortBy('index')">#</th>
      <th onclick="sortBy('title')">æ›²å â–²â–¼</th>
      <th onclick="sortBy('artist')">ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ â–²â–¼</th>
      <th>æ“ä½œ</th>
    </tr></thead>
    <tbody></tbody>
  </table>
  <div class="pagination">
    <button onclick="prevPage()">â® å‰ã¸</button>
    <span id="pageInfo"></span>
    <button onclick="nextPage()">æ¬¡ã¸ â­</button>
  </div>
  <div class="settings-toggle"><button onclick="toggleSettings()">âš™ï¸ è¨­å®š</button></div>
  <div class="settings-panel" id="settingsPanel">
    <div><label>ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼š</label><input type="text" id="pageTitleInput" oninput="updateTitle()"></div>
    <div><label>èƒŒæ™¯URLï¼š</label><input type="text" id="bgUrlInput" oninput="updateBackground()"><label>ç”»åƒï¼š</label><input type="file" id="bgUpload" accept="image/*" onchange="uploadBackground()"><button onclick="resetBackground()">ãƒªã‚»ãƒƒãƒˆ</button></div>
    <div><label>èƒŒæ™¯é€æ˜åº¦ï¼š</label><input type="range" min="0" max="1" step="0.01" id="bgOpacity" value="0.9" oninput="updateOpacity()"></div>
    <div><label>æ–‡å­—è‰²ï¼š</label><input type="color" id="textColor" value="#000000" onchange="updateTextColor()"></div>
    <div><button onclick="saveSettings()">è¨­å®šä¿å­˜</button><button onclick="loadSettings()">è¨­å®šå¾©å…ƒ</button></div>
    <div><button onclick="saveSongs()">æ›²ãƒªã‚¹ãƒˆä¿å­˜</button><button onclick="loadSongs()">æ›²ãƒªã‚¹ãƒˆå¾©å…ƒ</button></div>
  </div>
<script>
  const pageSize = 20;
  let songs = JSON.parse(localStorage.getItem("songList") || "[]");
  let currentPage = 1, sortKey = null, sortAsc = true;
  function renderTable(){
    let arr = [...songs];
    if(sortKey){
      arr.sort((a,b)=>sortAsc ? (a[sortKey]||'').localeCompare(b[sortKey]||'') : (b[sortKey]||'').localeCompare(a[sortKey]||''));
    }
    const tbody = document.querySelector("#songTable tbody"); tbody.innerHTML="";
    const start = (currentPage-1)*pageSize;
    const pageArr = arr.slice(start, start+pageSize);
    pageArr.forEach((song,i)=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${start+i+1}</td><td>${song.title}</td><td>${song.artist}</td><td><button onclick="editSong(${songs.indexOf(song)})">ç·¨é›†</button><button onclick="deleteSong(${songs.indexOf(song)})">å‰Šé™¤</button></td>`;
      tbody.appendChild(tr);
    });
    document.getElementById("pageInfo").textContent=`ãƒšãƒ¼ã‚¸ ${currentPage} / ${Math.max(Math.ceil(songs.length/pageSize),1)}`;
  }
  function addSong(){const t=document.getElementById("newTitle").value.trim(),a=document.getElementById("newArtist").value.trim();if(!t||!a)return alert("æ›²åã¨ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");songs.push({title:t,artist:a});saveSongs();document.getElementById("newTitle").value="";document.getElementById("newArtist").value="";renderTable();}
  function editSong(i){const s=songs[i],t=prompt("æ›²å",s.title),a=prompt("ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ",s.artist);if(t&&a){songs[i]={title:t.trim(),artist:a.trim()};saveSongs();renderTable();}}
  function deleteSong(i){if(confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){songs.splice(i,1);saveSongs();if(currentPage>Math.ceil(songs.length/pageSize))currentPage--;renderTable();}}
  function sortBy(key){ if(sortKey===key) sortAsc=!sortAsc; else {sortKey=key;sortAsc=true;} renderTable();}
  function nextPage(){if(currentPage<Math.ceil(songs.length/pageSize)){currentPage++;renderTable();}}
  function prevPage(){if(currentPage>1){currentPage--;renderTable();}}
  function toggleSettings(){const p=document.getElementById("settingsPanel");p.style.display=(p.style.display==="block"?"none":"block");}
  function updateTitle(){document.getElementById("pageTitle").textContent=document.getElementById("pageTitleInput").value||"ğŸ¶ æ­Œã®ãƒªã‚¹ãƒˆ";}
  function updateBackground(){document.body.style.backgroundImage = document.getElementById("bgUrlInput").value?"url('"+document.getElementById("bgUrlInput").value+"')":'none';}
  function uploadBackground(){const f=document.getElementById("bgUpload").files[0];if(f){const r=new FileReader();r.onload=e=>{document.body.style.backgroundImage=`url('${e.target.result}')`;localStorage.setItem("bgImage",e.target.result)};r.readAsDataURL(f);}}
  function resetBackground(){document.body.style.backgroundImage='none';document.getElementById("bgUrlInput").value='';localStorage.removeItem("bgImage");}
  function updateOpacity(){document.body.style.backgroundColor=`rgba(255,255,255,${1-document.getElementById("bgOpacity").value})`;}
  function updateTextColor(){document.body.style.color=document.getElementById("textColor").value;}
  function saveSettings(){localStorage.setItem("pageTitle",document.getElementById("pageTitleInput").value);localStorage.setItem("textColor",document.getElementById("textColor").value);localStorage.setItem("bgOpacity",document.getElementById("bgOpacity").value);localStorage.setItem("bgUrl",document.getElementById("bgUrlInput").value);}
  function loadSettings(){document.getElementById("pageTitleInput").value=localStorage.getItem("pageTitle")||''; updateTitle();document.getElementById("textColor").value=localStorage.getItem("textColor")||'#000000'; updateTextColor();document.getElementById("bgOpacity").value=localStorage.getItem("bgOpacity")||0.9; updateOpacity(); document.getElementById("bgUrlInput").value=localStorage.getItem("bgUrl")||''; updateBackground(); const img=localStorage.getItem("bgImage"); if(img)document.body.style.backgroundImage=`url('${img}')`;}
  function saveSongs(){localStorage.setItem("songList",JSON.stringify(songs));}
  function loadSongs(){songs=JSON.parse(localStorage.getItem("songList")||"[]"); if(currentPage>Math.ceil(songs.length/pageSize))currentPage=1; renderTable();}
  window.onload=function(){loadSettings();loadSongs();renderTable();}
</script>
</body>
</html>
